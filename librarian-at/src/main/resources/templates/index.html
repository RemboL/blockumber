<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <title>HELLO</title>
    <link rel="stylesheet" href="/css/bootstrap.min.css"/>
</head>
<body>
    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/blockly/blockly_compressed.js"></script>
    <script src="/js/blockly/blocks_compressed.js"></script>
    <script src="/js/blockly/msg/js/en.js"></script>

    <div id="blocklyDiv" style="height: 480px; width: 600px;"></div>
    <xml id="toolbox" style="display: none">
        <th:block th:each="stepdef : ${stepdefs}"><block th:attr="type=${stepdef.message0}"/></th:block>
    </xml>
    <script th:inline="javascript">
        var stepdefs = /*[[${stepdefs}]]*/ [];
        /*<![CDATA[*/
        for (var i = 0; i < stepdefs.length; i++) {
            const stepdef = stepdefs[i];
            Blockly.Blocks[stepdef.message0] = {
                init: function () {
                    this.jsonInit(stepdef);
                }
            };
        }
        var workspace = Blockly.inject('blocklyDiv',
                {toolbox: document.getElementById('toolbox')});
        /*]]>*/
    </script>
</body>
</html>